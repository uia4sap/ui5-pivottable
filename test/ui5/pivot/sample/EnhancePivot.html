<!DOCTYPE HTML>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Test Page - Pivot Table</title>
        <base href="../../../../">
        <!--[if lte IE 9]><script>
    (function() {
        var baseTag = document.getElementsByTagName('base')[0];
        baseTag.href = baseTag.href;
    })();
    </script><![endif]-->

        <script id="sap-ui-bootstrap" src="resources/sap-ui-core.js" data-sap-ui-async="true" data-sap-ui-libs="sap.m,ui5.pivot" data-sap-ui-xx-bindingSyntax="complex" data-sap-ui-theme="sap_belize">
        </script>

        <script>
            sap.ui.getCore().attachInit(function() {
                var data = [{
                        "site": "S001001",
                        "soft": 4,
                        "hard": 4,
                        "qty": 544,
                        "device": "A"
                    }, {
                        "site": "S001001",
                        "soft": 4,
                        "hard": 4,
                        "qty": 512,
                        "device": "A"
                    }, {
                        "site": "S001002",
                        "soft": 4,
                        "hard": 4,
                        "qty": 716,
                        "device": "B"
                    }, {
                        "site": "S001002",
                        "soft": 5,
                        "hard": 5,
                        "qty": 495,
                        "device": "B"
                    }, {
                        "site": "S001001",
                        "soft": 9,
                        "hard": 9,
                        "qty": 303,
                        "device": "C"
                    }, {
                        "site": "S001001",
                        "soft": 4,
                        "hard": 4,
                        "qty": 723,
                        "device": "A"
                    }, {
                        "site": "S001001",
                        "soft": 4,
                        "hard": 4,
                        "qty": 61.3,
                        "device": "A"
                    }, {
                        "site": 1,
                        "soft": 14,
                        "hard": 2,
                        "qty": 52,
                        "device": "C"
                    }, {
                        "site": "S001003",
                        "soft": 14,
                        "hard": 23,
                        "qty": 89,
                        "device": "D"
                    }, {
                        "site": "S001003",
                        "soft": 114,
                        "hard": 2,
                        "qty": 55,
                        "device": "A"
                    }, {
                        "site": "S001003",
                        "soft": 94,
                        "hard": 2,
                        "qty": 10,
                        "device": "B"
                    }, {
                        "site": "S001003",
                        "soft": 84,
                        "hard": 2,
                        "qty": 31,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 74,
                        "hard": 2,
                        "qty": 56,
                        "device": "B"
                    },{
                        "site": "S001003",
                        "soft": 64,
                        "hard": 2,
                        "qty": 54,
                        "device": "D"
                    },{
                        "site": "S001003",
                        "soft": 54,
                        "hard": 76,
                        "qty": 124,
                        "device": "D"
                    },{
                        "site": "S001003",
                        "soft": 44,
                        "hard": 76,
                        "qty": 10,
                        "device": "A"
                    },{
                        "site": "S001003",
                        "soft": 34,
                        "hard": 72,
                        "qty": 80,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 25,
                        "hard": 72,
                        "qty": 98,
                        "device": "B"
                    },{
                        "site": "S001003",
                        "soft": 24,
                        "hard": 72,
                        "qty": 11,
                        "device": "B"
                    },{
                        "site": "S001003",
                        "soft": 15,
                        "hard": 67,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 14,
                        "hard": 67,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 14,
                        "hard": 23,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 19,
                        "hard": 93,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 14,
                        "hard": 74,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 91,
                        "hard": 7,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 3,
                        "hard": 1,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 56,
                        "hard": 3,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 140,
                        "hard": 80,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 154,
                        "hard": 66,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 154,
                        "hard": 5,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 14,
                        "hard": 21,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 44,
                        "hard": 76,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 74,
                        "hard": 25,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 14,
                        "hard": 25,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 114,
                        "hard": 64,
                        "qty": 110,
                        "device": "C"
                    },{
                        "site": "S001003",
                        "soft": 114,
                        "hard": 21,
                        "qty": 110,
                        "device": "C"
                    }];
                var sortInfo = {
                    site: ["S001003", "S001001", "1", "S001002"]
                };

                var table = new ui5.pivot.PivotTable({
                    layoutId: "simple_pivot_test"
                });
                table.setRows(["soft"]);
                table.setCols(["site"]);
                table.setClickable(true);
                table.setHeatColorMode("RANGE");
                table.attachTableClicked(function(oEvent) {
                    var recs = oEvent.getParameter("records");
                    alert(recs);
                });
                table.setRendererOptions({
                    table: {
                        // rowTotals: false
                    }
                });
                var button1 = new sap.m.Button({
                    width: "120px",
                    text: "Reload"
                });
                button1.attachPress(function() {
                    table.load(data, sortInfo);
                })
                var button2 = new sap.m.Button({
                    width: "120px",
                    text: "Clear Filter"
                });
                button2.attachPress(function() {
                    table.clearFilters();
                });
                var button3 = new sap.m.Button({
                    width: "120px",
                    text: "Save Layout"
                });
                button3.attachPress(function() {
                    table.saveLayout();
                });
                var button4 = new sap.m.Button({
                    width: "120px",
                    text: "Load Layout"
                });
                button4.attachPress(function() {
                    table.loadLayout();
                });
                var check1 = new sap.m.CheckBox();
                check1.setSelected(true);
                check1.setText("Clickable");
                check1.attachSelect(function(oEvent) {
                    table.setClickable(oEvent.getParameter("selected"));
                });


                var hBox = new sap.m.HBox();
                hBox.addItem(button2);
                hBox.addItem(button3);
                hBox.addItem(button4);
                hBox.addItem(check1);

                var vBox = new sap.m.VBox();
                vBox.addItem(hBox);
                vBox.addItem(table);
                vBox.addItem(button1);

                vBox.placeAt("content");
            });

        </script>
    </head>

    <body id="content" class="sapUiBody">
    </body>

</html>
